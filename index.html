<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cinéma NIYAS</title>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;700&family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="stylesheet" href="niyas.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</head>
<body>

<div class="cursor-glow"></div>

<nav>
    <a href="#home" class="nav-link"><i class="fas fa-home"></i> Accueil</a>
    <a href="#films" class="nav-link"><i class="fas fa-film"></i> Films</a>
    <a href="#favorites" class="nav-link"><i class="fas fa-heart"></i> Favorites</a>
    <a href="#localmovies" class="nav-link"><i class="fas fa-plus"></i> Add Movie</a>
    <a href="#realisateurs" class="nav-link"><i class="fas fa-user-tie"></i> Réalisateurs</a>
    <a href="#kpi" class="nav-link"><i class="fas fa-chart-line"></i> KPI</a>
    <a href="#map" class="nav-link"><i class="fas fa-map-marker-alt"></i> Localisation</a>
</nav>

<!-- Home Section -->
<section id="home" class="page-section">
    <header>
        <div class="hero">
            <h1>Cinéma NIYAS</h1>
            <p class="tagline">Films, Réalisateurs et KPI — votre guide cinéma local</p>
            <div class="search-container">
                <input type="text" id="searchInput" placeholder="Search movie...">
                <button id="searchBtn">Search</button>
            </div>
            <!-- Local movies moved to its own page (Add Movie) -->
        </div>
    </header>
</section>

<!-- Films Section -->
<section id="films" class="page-section">
    <div class="section-header">
        <h2>Random Movie Suggestions</h2>
        <button id="refreshMovies" class="refresh-btn">
            <i class="fas fa-sync-alt"></i> Get New Suggestions
        </button>
    </div>
    <div class="films-filters" style="max-width:1200px;margin:0 auto;padding:0 20px 18px;display:flex;gap:12px;flex-wrap:wrap;align-items:center;">
        <label style="color:#ddd; font-size:13px">Min Year</label>
        <input id="apiFilterYearFrom" type="number" placeholder="From" style="padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:rgba(0,0,0,0.18);color:#fff;">
        <label style="color:#ddd; font-size:13px">Max Year</label>
        <input id="apiFilterYearTo" type="number" placeholder="To" style="padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:rgba(0,0,0,0.18);color:#fff;">
        <label style="color:#ddd; font-size:13px">Min Rating</label>
        <input id="apiFilterMinRating" type="number" step="0.1" min="0" max="10" placeholder="e.g. 7" style="padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:rgba(0,0,0,0.18);color:#fff;">
        <button id="applyApiFilters" class="refresh-btn">Apply</button>
        <button id="clearApiFilters" class="refresh-btn">Clear</button>
    </div>
    <div id="movies-container" class="movies-container"></div>
</section>

<!-- Favorites Section -->
<section id="favorites" class="page-section">
    <div class="section-header">
        <h2>My Favorite Movies</h2>
        <div class="favorites-stats">
            <span id="favorites-count">0 favorites</span>
        </div>
    </div>
    <div class="favorites-filters" style="max-width:1200px;margin:0 auto;padding:0 20px 18px;display:flex;gap:12px;flex-wrap:wrap;align-items:center;">
        <label style="color:#ddd; font-size:13px">Genre</label>
        <select id="favFilterGenre" style="padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:rgba(0,0,0,0.18);color:#fff;">
            <option value="">Any</option>
            <option>Action</option>
            <option>Comedy</option>
            <option>Drama</option>
            <option>Horror</option>
            <option>Romance</option>
            <option>Animation</option>
        </select>
        <label style="color:#ddd; font-size:13px">Min Rating</label>
        <input id="favFilterMinRating" type="number" step="0.1" min="0" max="10" placeholder="e.g. 7" style="padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:rgba(0,0,0,0.18);color:#fff;">
        <button id="applyFavFilters" class="refresh-btn">Apply</button>
        <button id="clearFavFilters" class="refresh-btn">Clear</button>
    </div>
    <div id="favorites-list" class="movies-container"></div>
</section>

<!-- Local Movies: Add / Edit / Delete (own page) -->
<section id="localmovies" class="page-section">
    <div class="section-header">
        <h2>Add / Manage Local Movies</h2>
    </div>
    <div class="local-movies-page" style="max-width:1000px;margin:0 auto;padding:20px;">
        <div class="local-controls" style="display:flex;gap:16px;flex-wrap:wrap;margin-bottom:14px;">
            <div class="filter-box">
                <label>Genre</label>
                <select id="filterGenre">
                    <option value="">Any</option>
                    <option>Action</option>
                    <option>Comedy</option>
                    <option>Drama</option>
                    <option>Horror</option>
                    <option>Romance</option>
                    <option>Animation</option>
                </select>
            </div>
            <div class="filter-box">
                <label>Year From</label>
                <input type="number" id="filterYearFrom" placeholder="e.g. 2000">
            </div>
            <div class="filter-box">
                <label>Year To</label>
                <input type="number" id="filterYearTo" placeholder="e.g. 2025">
            </div>
            <div class="filter-box">
                <label>Min Rating</label>
                <input type="number" id="filterMinRating" min="0" max="10" step="0.1" placeholder="e.g. 7">
            </div>
            <div style="display:flex;align-items:flex-end;gap:8px;">
                <button id="applyLocalFilters" class="refresh-btn">Apply Filters</button>
                <button id="clearLocalFilters" class="refresh-btn">Clear</button>
            </div>
            <div style="margin-left:auto;display:flex;align-items:flex-end;gap:8px;">
                <button id="refreshLocalFromApi" class="refresh-btn" title="Replace local movies with API results"><i class="fas fa-download"></i> Refresh Local From API</button>
            </div>
        </div>

        <form id="localMovieForm" class="local-movie-form">
            <input type="hidden" id="localEditId">
            <input type="text" id="localTitle" placeholder="Title" required>
            <input type="text" id="localDirector" placeholder="Director">
            <input type="text" id="localGenre" placeholder="Genre (e.g. Action)">
            <input type="number" id="localYear" placeholder="Year">
            <input type="number" id="localRating" placeholder="Rating (0-10)" step="0.1" min="0" max="10">
            <input type="url" id="localPoster" placeholder="Poster URL (optional)">
            <textarea id="localDescription" placeholder="Short description"></textarea>
            <button type="submit">Save Movie</button>
        </form>
        <div id="local-movies" class="movies-container" style="margin-top:20px;"></div>
    </div>
</section>

<!-- Directors Section -->
<section id="realisateurs" class="page-section">
    <div class="section-header">
        <h2>Featured Directors</h2>
        <button id="refreshDirectors" class="refresh-btn">
            <i class="fas fa-sync-alt"></i> Refresh Directors
        </button>
    </div>
    <div class="director-controls" style="max-width:1200px;margin:0 auto;padding:0 20px 18px;display:flex;gap:12px;flex-wrap:wrap;align-items:center;">
        <form id="localDirectorForm" style="display:flex;gap:8px;align-items:end;flex-wrap:wrap;">
            <input type="hidden" id="localDirectorId">
            <input id="dirName" placeholder="Name" style="padding:8px;border-radius:8px;">
            <input id="dirMovieCount" type="number" placeholder="# Movies" style="padding:8px;border-radius:8px;" min="0">
            <input id="dirAvgRating" type="number" placeholder="Avg Rating" step="0.1" min="0" max="10" style="padding:8px;border-radius:8px;">
            <input id="dirBio" placeholder="Short bio" style="padding:8px;border-radius:8px;">
            <button id="saveDirectorBtn" class="refresh-btn">Save Director</button>
        </form>
    </div>
    <div id="directors-list" class="director-list"></div>
</section>

<!-- KPI Section -->
<section id="kpi" class="page-section">
    <div class="section-header">
        <h2>Performance Analytics</h2>
    </div>
    <div class="kpi-content">
        <div class="kpi-cards">
            <div class="kpi-card" id="kpi-total-movies">
                <h3>Total Movies</h3>
                <p class="kpi-value">0</p>
            </div>
            <div class="kpi-card" id="kpi-top-source">
                <h3>Top Source</h3>
                <p class="kpi-value">-</p>
            </div>
            <div class="kpi-card" id="kpi-api-info">
                <h3>API Info (agify)</h3>
                <p class="kpi-value" id="apiKpi">-</p>
            </div>
        </div>
        <div id="kpi-graph" class="chart-container">
            <canvas id="kpiChart"></canvas>
        </div>
        <div id="kpi-donut" class="chart-container" style="margin-top:16px;">
            <canvas id="kpiDonut"></canvas>
        </div>
        <div class="kpi-table-container">
            <table>
                <thead>
                    <tr>
                        <th>CineTech</th>
                        <th>Films</th>
                        <th>Réalisateurs</th>
                        <th>KPI cinéma</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </div>
</section>

<!-- Employees module removed (cinema app focuses on movies) -->

<!-- Search Results Section -->
<section id="search-results" class="page-section">
    <div class="section-header">
        <h2>Search Results</h2>
    </div>
    <div id="movies" class="movies-container"></div>
</section>

<!-- Map Section -->
<section id="map" class="page-section">
    <div class="section-header">
        <h2>Location</h2>
    </div>
    <div class="loca">
        <i class="fas fa-map-marker-alt"></i>
        <iframe 
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d207.84140874819164!2d-7.673624894870941!3d33.541356801407815!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0xda62cc30d54b92d%3A0x4c1926b0ee0c8126!2sEMSI%20Les%20orangers!5e0!3m2!1sen!2sma!4v1765662408680!5m2!1sen!2sma" 
            allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade">
        </iframe>
    </div>
</section>

<footer>
    <p> 2025 Cinéma NIYAS</p>
</footer>

<script src="niyas.js"></script>
</body>
</html>
